[pytest]
# ==================== 基础执行配置 ====================
# 全局默认命令行参数（-v详细输出/-s显示print/HTML报告/Allure报告）
addopts = -v -s --html=report/report.html --self-contained-html --alluredir=report/allure_result_temp --clean-alluredir
# 指定测试用例根目录（仅扫描tests/目录，提升效率）
testpaths = tests/

# ==================== 测试发现规则（显式配置，便于维护） ====================
# 匹配以test_开头的.py文件
python_files = test_*.py
# 匹配文件中以test_开头的函数/方法
python_functions = test_*
# 匹配以Test开头的类（无__init__方法）
python_classes = Test*

# ==================== 自定义Mark标签 ====================
markers =
    api: 接口测试
    web: Web-UI测试
    unit: 单元测试
    smoke: 冒烟测试

# ==================== 日志配置 ====================
# 日志文件路径
log_file = ./logs/pytest.log
# 日志文件级别（DEBUG/INFO/WARNING/ERROR/CRITICAL）
log_file_level = DEBUG
# 日志格式（级别+时间+文件/行号+函数名+内容）
log_file_format = %(levelname)-8s %(asctime)s [%(name)s:%(lineno)s] %(funcName)s : %(message)s
# 日志时间格式
log_file_date_format = %Y-%m-%d %H:%M:%S

# ==================== 兼容性/输出优化 ====================
# 统一测试文件编码为UTF-8，解决中文乱码
python_files_encoding = utf-8
# 过滤无关警告（如DeprecationWarning）
filterwarnings =
    ignore::DeprecationWarning
    ignore::UserWarning
# 禁止对输出中的非ASCII字符转义
disable_test_id_escaping_and_forfeit_all_rights_to_community_support = True

# ==================== Allure报告补充配置（若使用） ====================
allure_epic = 项目名称（如：电商平台）
allure_feature = 核心模块（如：订单模块）

# ==================== pytest-result-log 的配置 ====================
# 记录用例结果
result_log_enable = 1
# 记录用例分割线
result_log_separator = 1
# 分割线等级
result_log_level_separator = warning
# 异常信息等级
result_log_level_verbose = info